{% extends 'AuderoWebBundle::base.html.twig' %}

{% block body %}
    response with it's photos
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'showphoto'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>

{% endblock %}

{% block scripts %}
<script>
    $('#like_button').click(function(){
        $.ajax({
            type: "POST",
            url: '/app_dev.php/rating/like',
            data: {request_slug: $(this).data('request_slug'), response_author: $(this).data('response_author'), rate: $(this).data('rate')}
        });
    });

    $('#dislike_button').click(function(){
        $.ajax({
            type: "POST",
            url: '/app_dev.php/rating/',
            data: {photo_id: $(this).data('id'), rate: $(this).data('rate')}
        });
    });

    var conn = new ab.Session('ws://127.0.0.1:8080',
            function() {
                conn.subscribe('chat', function(topic, data) {
                    console.log(data);
                });
            },
            function() {
                console.warn('WebSocket connection closed');
            },
            {'skipSubprotocolCheck': true}
    );

</script>

{% endblock %}
