{% extends "AuderoWebBundle::base.html.twig" %}

{% block title %}AuderoShowphotoBundle:Game:index{% endblock %}

{% block body %}
    <hr>
<div class="row">
    <div class="col-md-8">
        <blockquote>
            <p id="request">{{ request.title }}</p>
            <small id="user">by {{ request.user.username }}</small>
        </blockquote>
        <hr>
        <div id="responses">
            {% for response in responses %}
                <div class="col-md-4">
                    <p class="text-center">
                        <img class="img-responsive" src="{{ response.photoLink }}">
                    </p>
                </div>
            {% endfor %}
        </div>
    </div>
    <div class="col-md-4">
        <p><a href="#" class="btn btn-default btn-lg btn-block">Time left: <span id="timer"></span></a></p>
        {{ form_start(form_response, {'attr': {'target': 'uploadHandler'}}) }}
        {{ form_rest(form_response) }}
        {{ form_end(form_response) }}
        <iframe name="uploadHandler" id="uploadHandler" style="display: none" src="{{ path('game_response_create') }}">
        </iframe>
        <hr>
        <ul class="nav nav-tabs">
            <li class="active"><a href="#chat" data-toggle="tab">Chat</a></li>
            <li class=""><a href="#players" data-toggle="tab">Players</a></li>
            <li class=""><a href="#wishList" data-toggle="tab">My wishList</a></li>
        </ul>
        <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade active in" id="chat">
                {{ render(controller('AuderoShowphotoBundle:Chat:index')) }}
            </div>
            <div class="tab-pane fade" id="players">
                <ul class="list-unstyled">
                    {% for player in players %}
                    <li><a href="#"><i class="fa fa-user"></i> {{ player.user.username }}</a></li>
                    {% endfor %}
                </ul>
            </div>
            <div class="tab-pane fade" id="wishList">
                <div id="wish-list-errors">
                </div>
                <span id="wishes">
                    {% for i in 1..wishListSize %}
                        <p><input type="text" class="form-control"
                              data-position="{{ i }}"
                                {% if wishList[i] is defined  %}
                                    value="{{ wishList[i].title }}"
                                {% endif %}
                              placeholder="Place your wish">
                        </p>
                    {% endfor %}
                </span>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
    <script src="{{ asset('bundles/auderoshowphoto/js/game.js') }}" type="text/javascript"></script>
{% endblock %}
