{% extends "AuderoWebBundle::base.html.twig" %}

{% block title %}Play{% endblock %}

{% block dialogs %}
    <div id="upload_dialog" title="Insert Image" style="display: none">
        <div class="btn-group btn-group-justified">
            <a href="#" id="type_url" class="btn btn-primary btn-xs">URL</a>
            <a href="#" id="type_file" class="btn btn-primary btn-xs">FILE</a>
        </div>
        <br>
        <div id="errors" style="color: red"></div>
        <div id="upload_message"></div>
        <div id="form_url">
            {{ form_start(form_url) }}
            {{ form_widget(form_url.photoUrl) }}
            {{ form_widget(form_url.upload, {'attr':{'class':'btn btn-default'}}) }}


            {{ form_end(form_url) }}

        </div>
        <div id="form_file" style="display: none">
            {{ form_start(form_file) }}
            {{ form_widget(form_file.photoFile) }}
            <br/>
            {{ form_widget(form_file.upload, {'attr':{'class':'btn btn-default'}}) }}
            {{ form_end(form_file) }}


        </div>
    </div>
    <div id="notification_dialog" style="display: none">
    </div>
{% endblock %}

{% block body %}
<div class="row" style="margin-top: 40px">
    <div class="col-md-8">

        <div id="request-panel" class="panel panel-default">
            <div class="panel-body" >
                <span id="request" style="font-size: 20px">{{ request.title }}</span>
                <span id="user" style="font-size: 20px"> @{{ request.user }}</span>
            </div>
        </div>

       <div id="winners-panel" class="panel panel-default" style="display: none">
            <div class="panel-heading">
                <h3 class="panel-title">Winners</h3>
            </div>
            <div class="panel-body">
                <table class="table table-striped table-hover ">
                    <thead>
                    <tr>
                        <th>Place</th>
                        <th>Player</th>
                        <th>Rate</th>
                    </tr>
                    </thead>
                    <tbody id="winners-panel-body">
                        <tr>
                            <td>1</td>
                            <td>Rokas</td>
                            <td>+10</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div>
            <div id="upload_dialog_opener" class="col-lg-4 col-md-4">
                <a class="thumbnail" href="#">
                    <img class="img-responsive" style="height: 110px" src="http://www.homes.ch/img_icons/upload.png" alt="Upload">
                </a>
            </div>
            <span id="responses">
                {% for response in request.responses %}
                    <div class="col-lg-3 col-md-4 col-xs-6 thumb">
                        <a class="thumbnail" href="#" target="_blank">
                            <img class="img-responsive" src="http://i.imgur.com/{{ response.photoId }}s.jpg">
                        </a>
                    </div>
                {% endfor %}
            </span>
        </div>

    </div>


    <div class="col-md-4">
        <p>
            <a href="#" class="btn btn-default btn-lg btn-block">
                Time left: <span id="timer" data-timeLeft="{{ timeLeft }}">0</span>
            </a>
        </p>
        <br/>
        <ul class="nav nav-tabs">
            <li class="active"><a href="#chat" data-toggle="tab">Chat</a></li>
            <li class=""><a href="#players" data-toggle="tab">Players</a></li>
            <li class=""><a href="#wishList" data-toggle="tab">My wishList</a></li>
        </ul>
        <div id="myTabContent" class="tab-content">
            <div class="tab-pane fade active in" id="chat">
                {{ render(controller('AuderoShowphotoBundle:Chat:index')) }}
            </div>
            <div class="tab-pane fade" id="players">
                <ul class="list-unstyled" id="players_content" >
                    {% for player in players %}
                    <li><a href="{{ path('web_profile_user', {'username':player.user.username}) }}"><i class="fa fa-user"></i> {{ player.user.username }}</a></li>
                    {% endfor %}
                </ul>
            </div>
            <div class="tab-pane fade" id="wishList">
                <div id="wish-list-errors">
                </div>
                <span id="wishes">
                    {% for i in 1..wishListSize %}
                        <p><input type="text" class="form-control"
                              data-position="{{ i }}"
                                {% if wishList[i] is defined  %}
                                    value="{{ wishList[i].title }}"
                                {% endif %}
                              placeholder="Place your wish">
                        </p>
                    {% endfor %}
                </span>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
    <script src="{{ asset('bundles/auderoshowphoto/js/game.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/auderoshowphoto/js/response.js') }}" type="text/javascript"></script>
    <script src="{{ asset('bundles/auderoshowphoto/js/wishList.js') }}" type="text/javascript"></script>
{% endblock %}
